{% extends "XTeamPlatformBundle::layout.html.twig" %}

{% block title %}
    Recherche {{ parent() }}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/questions_list.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">

        <div class="col s12 m10">

            <div class="row">
                <div class="col s12 m12">
                    {% if recherche == 'all' %}
                        <h4>Liste des questions</h4>
                    {% else %}
                        <h4>Résultats pour <span id="research">{{ recherche }}</span></h4>
                    {% endif %}
                </div>
            </div>

            <div class="row">
                <div class="col s12 m12">
                    <ul id="categories" class="tabs">
                        <li class="tab col s6 m3"><a href="#recent">Par date</a></li>
                        <li class="tab col s6 m4"><a href="#votes">Par nombre de vote</a></li>
                    </ul>
                </div>
            </div>

            <div class="row">
                <div id="recent" class="col s12 m12">
                    {% for question in questionsByDate %}
                        <div class="row question_block">
                            <div class="col s12 m12">
                                <div class="row">
                                    <div class="col s2 m2 center-align">
                                        {% if question.isResolved %}
                                            <img src="{{ asset('img/pouce_vert.png') }}">
                                        {% endif %}
                                    </div>
                                    <div class="col s7 m7">
                                        <h6><a href="{{ path('question_show', { 'id': question.id }) }}">{{ question.titre }}</a></h6>
                                    </div>
                                    <div class="col s3 m3 right-align">
                                        <p>Postée le {{ question.date|date('d-m-Y') }}<p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s2 m2 center-align">
                                        {% set r_count = question.responses|length %}
                                        <p>{{ r_count }}{% if r_count > 1 %} réponses{% else %} réponse{% endif %}</p>
                                    </div>
                                    <div class="col s7 m7">
                                        {% for tag in question.tags %}
                                            <div class="chip">{{ tag.tagname }}</div>
                                        {% endfor %}
                                    </div>
                                    <div class="col s3 m3 right-align">
                                        <p>par
                                            {% if question.user %}{{ question.user.username }}
                                            {% else %}Anonymous{% endif %}
                                        </p>
                                    </div>
                                </div>
                             </div>
                        </div>
                    {% endfor %}
                </div>

                <div class="col s12" id="votes">
                    <p>test</p>
                </div>

            </div>

        </div>

        <div class="col s12 m2">

        </div>

    </div>

    <ul>
        <li>
            <a href="{{ path('question_new') }}" class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons">add</i></a>
        </li>
    </ul>

</div>
{% endblock %}

{% block scripts %}
    {{ parent() }}
    <script src="{{ asset('JS/questionIndex.js') }}"></script>
{% endblock %}